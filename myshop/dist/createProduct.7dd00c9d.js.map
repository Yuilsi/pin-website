{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBAmBAE,eAAeC,EAAaC,EAASC,EAAQ,IAUxC,OARuBA,EAAOC,KAC5BJ,MAAOK,IACF,MAAMC,QATlBN,eAAoCE,EAAQG,GAC5C,MAAME,EAAaC,EAAAC,IAAIP,EAAQ,mBAAmBG,EAAMK,QACxD,aAAaF,EAAAG,YAAYJ,EAAWF,GAOKO,CAAqBV,EAAQG,GAE1D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAAQI,EAAeG,IAAIK,cDrBjE,MAAMC,EAAoBC,SAASC,eAAe,qBAClDF,EAAkBG,iBAAiB,UAAUlB,MAAOmB,IAChDA,EAAEC,iBACFC,QAAQC,IAAI,wBAEhB,MAAMZ,EAAMK,EAAkBL,KAAKa,MAC7BC,EAAYT,EAAkBS,YAAYD,MAC1CE,EAAOV,EAAkBU,MAAMF,MAC/BG,EAAUX,EAAkBW,SAASH,MACrCpB,EAAQY,EAAkBZ,OAAOwB,MAEvC,IAAIC,EAAU,GAGd,GAAGzB,EAAO0B,OAAO,CAGf,MAAMC,QAAsB7B,EAAaJ,EAAAK,QACvC,IAAIC,IACRkB,QAAQC,IAAIQ,GAEZF,QAAgBG,QAAQC,IAAIF,GAK5B,MAAMG,EAAa,MACjBvB,cACAc,QACAC,WACAC,EACAvB,OAAQyB,SC/BV5B,eAA0BkC,EAAGC,GACzB,UACWpC,EAAAqC,OAAOrC,EAAAsC,WAAWH,EACrB,YAAaC,GACbd,QAAQC,IAAI,sBAClB,MAAOH,GACLE,QAAQC,IAAIH,ID4BdmB,CAAWzC,EAAAqC,GAAGD","sources":["src/scripts/createProduct.js","src/scripts/functions/addProduct.js"],"sourcesContent":["import { storage, db } from \"./app\";\r\nimport { addProduct, uploadImages } from \"./functions/addProduct\";\r\n\r\n\r\nconst createProductForm = document.getElementById(\"createProductForm\");\r\ncreateProductForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"create a new product\");\r\n\r\nconst name =createProductForm.name.value;\r\nconst description=createProductForm.description.value;\r\nconst price= createProductForm.price.value;\r\nconst category= createProductForm.category.value;\r\nconst images= createProductForm.images.files;\r\n\r\nlet gallery = [];\r\n\r\n\r\nif(images.length){\r\n  //si mi arreglo de imagenes tiene un tamaÃ±o, entonces \r\n  //vamos a subir las imagenes a firestore\r\n  const uploadedImages= await uploadImages(storage,\r\n    [...images]);\r\nconsole.log(uploadedImages);\r\n\r\ngallery = await Promise.all(uploadedImages);\r\n\r\n\r\n}\r\n\r\nconst newProduct = {\r\n  name,\r\n  description,\r\n  price,\r\n  category,\r\n  images: gallery, \r\n}\r\n\r\nawait addProduct(db,newProduct);\r\n//console.log(newProduct);\r\n\r\n});","import { addDoc, collection } from \"firebase/firestore\";\r\nimport{ref,uploadBytes,getDownloadURL} from \"firebase/storage\";\r\n\r\n\r\nasync function addProduct(db,product){\r\n    try {\r\n         await addDoc(collection(db,\r\n            \"products\"), product);\r\n            console.log(\"producto agregado!\")\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n} \r\n\r\nasync function imageUploadReference(storage,image){ //referencia donde se esta almacenando la imagen\r\nconst storageRef = ref(storage,`products/images/${image.name}`);\r\nreturn await uploadBytes(storageRef,image);\r\n}\r\n\r\nasync function uploadImages(storage, images= []){\r\n\r\n    const uploadedImages =  images.map(\r\n       async (image)=> {\r\n            const imageReference = await imageUploadReference(storage,image);\r\n\r\n            return getDownloadURL(ref(storage,imageReference.ref.fullPath));\r\n        });\r\n        //console.log(uploadedImages);\r\n\r\n     return uploadedImages;     \r\n}\r\n\r\nexport{\r\n    addProduct,\r\n    uploadImages\r\n}\r\n"],"names":["$li1Mx","parcelRequire","$etBjH","async","$5ff810c2bfdb1b0e$export$633f5b6169e2b910","storage","images","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$5ff810c2bfdb1b0e$var$imageUploadReference","getDownloadURL","fullPath","$429397c78ea7114e$var$createProductForm","document","getElementById","addEventListener","e","preventDefault","console","log","value","description","price","category","files","gallery","length","uploadedImages","Promise","all","newProduct","db","product","addDoc","collection","$5ff810c2bfdb1b0e$export$7caf006d7b64ee15"],"version":3,"file":"createProduct.7dd00c9d.js.map"}